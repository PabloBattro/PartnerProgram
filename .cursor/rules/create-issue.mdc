---
description: Capture a bug/feature/improvement quickly while mid-development
globs: 
alwaysApply: false
---

# Create Issue

User is mid-development and thought of a bug/feature/improvement. Capture it fast so they can keep working.

## Your Goal

Create a complete issue with:
- Clear title
- TL;DR of what this is about
- Current state vs expected outcome
- Relevant files that need touching
- Risk/notes if applicable
- Proper type/priority/effort labels

## How to Get There

**Ask questions** to fill gaps - be concise, respect the user's time. They're mid-flow and want to capture this quickly. Usually need:
- What's the issue/feature
- Current behavior vs desired behavior
- Type (bug/feature/improvement) and priority if not obvious

Keep questions brief. One message with 2-3 targeted questions beats multiple back-and-forths.

**Search for context** only when helpful:
- Web search for best practices if it's a complex feature
- Grep codebase to find relevant files
- Note any risks or dependencies you spot

**Skip what's obvious** - If it's a straightforward bug, don't search web. If type/priority is clear from description, don't ask.

**Keep it fast** - Total exchange under 2min. Be conversational but brief. Get what you need, create ticket, done.

## Behavior Rules

- Be conversational - ask what makes sense, not a checklist
- Default priority: normal, effort: medium (ask only if unclear)
- Max 3 files in context - most relevant only
- Bullet points over paragraphs

## Persist to Backlog (MANDATORY)

After presenting the issue to the user, **always** append it to `docs/backlog.md`.

Use this exact format when appending:

```
### ISS-{NNN} · {Title}

| Field    | Value                          |
|----------|--------------------------------|
| Type     | bug / feature / improvement    |
| Priority | low / normal / high / critical |
| Effort   | small / medium / large         |
| Status   | open                           |
| Created  | YYYY-MM-DD                     |

**TL;DR:** One-liner summary.

**Current → Expected:**
- Current: what happens now
- Expected: what should happen

**Files:**
- `path/to/file1.ts`
- `path/to/file2.ts`

**Notes:** Any risks, dependencies, or extra context. Omit row if none.

---
```

Rules for the backlog:
- Auto-increment `ISS-{NNN}` by reading the last ID in `docs/backlog.md` (start at ISS-001)
- Newest issues go at the **bottom** of the file (append before the end)
- Never remove or edit existing entries — append only
- When marking an issue done later, change Status to `done` and add a `Resolved` date row
- This step is **not optional** — if the file write fails, retry or alert the user
